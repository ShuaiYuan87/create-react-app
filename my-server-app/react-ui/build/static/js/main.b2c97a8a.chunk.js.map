{"version":3,"sources":["lib/player_action.js","lib/msg.js","resources/narcos.logo.png","chatHead.js","chatPane.js","player.js","App.js","registerServiceWorker.js","index.js","resources/rainbow.jpg","resources/YouTube.jpg","resources/facebook.jpg","resources/vimeo.jpg","resources/dailymotion.jpg"],"names":["PlayerAction","Object","freeze","PLAY","PAUSE","SEEK","STOP","RELOAD","CHAT","module","exports","MsgType","CHECK_LATENCY","REQUEST","ACK","ACTION","__webpack_require__","p","Chathead","react_default","a","createElement","className","this","props","text","alt","src","userid","React","Component","ChatPane","react_motion","defaultStyles","getDefaultValue","styles","getEndValue","willLeave","willEnter","map","_ref","key","style","data","childrenMap","total","children","length","j","Math","max","i","toString","width","spring","presets","gentle","opacity","require","msg","Player","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","url","playing","volume","muted","played","loaded","duration","playbackRate","loop","opaque","modalIsOpen","init","initiate","chatheads","onPlay","console","log","setState","message","createMessage","rid","socket","emit","JSON","stringify","onPause","checkRecieve","rawdata","parse","time","player","getCurrentTime","ref","onSeekMouseDown","e","seeking","onSeekChange","parseFloat","target","value","onSeekMouseUp","percentage","seekTo","onProgress","onDuration","playPause","over","bind","assertThisInitialized","out","onstart","messageRecieve","initRecieve","reloadRecieve","_add","_addMessage","_this2","_this$state","w","window","innerWidth","portion","h","innerHeight","chatPane","type","min","step","onMouseDown","onChange","onMouseUp","onClick","sendChat","evt","onKeyDown","height","display","onMouseOver","onMouseOut","ReactPlayer_default","onReady","config","vimeo","playerOptions","byline","dailymotion","params","controls","facebook","appId","onStart","event","keyCode","push","chatHead","room","on","loadVideo","prevProps","ack_msg_id","action","vid","clientTime","Date","now","clientId","playerTime","playerAction","videoId","roomId","ackMsgID","msgType","parseInt","applyActionToPlayer","floor","random","defaultRoomID","io","connect","ReactGA","initialize","pageview","customStyles","content","top","left","right","bottom","marginRight","transform","Modal","setAppElement","App","_Component","roomURL","openModal","afterOpenModal","closeModal","setURL","myRef","createRef","updateLoggedInState","updateLoggedOutState","inherits","createClass","u","roomID","subtitle","color","dummy","document","location","href","body","appendChild","select","execCommand","removeChild","alert","response","authResponse","userID","fbAsyncInit","FB","cookie","xfbml","version","getLoginStatus","Event","subscribe","d","s","id","js","fjs","getElementsByTagName","getElementById","parentNode","insertBefore","_this3","BrowserRouter","lib_default","isOpen","onAfterOpen","onRequestClose","contentLabel","backgroundImage","background","data-max-rows","data-size","data-button-type","data-show-faces","data-auto-logout-link","data-use-continue-as","current","reload","youtube","Switch","Route","exact","path","render","ga","pathname","search","Redirect","to","_ref2","match","doNothing","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","ReactDOM","src_App_0","URL","process","origin","addEventListener","concat","fetch","status","headers","get","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.b2c97a8a.chunk.js","sourcesContent":["/**\n *\n */\n\nvar PlayerAction = Object.freeze({\n        PLAY: 1,\n        PAUSE: 2,\n        SEEK: 3,\n        STOP: 4,\n        RELOAD: 5,\n        CHAT: 6\n    });\n\nmodule.exports = PlayerAction;\n","/**\n * \n */\n\n(function(exports){\n    exports.MsgType = Object.freeze({\n        CHECK_LATENCY: 1, \n        REQUEST: 2, \n        ACK: 3,\n        ACTION: 4,\n    });\n\n})(typeof exports === 'undefined'? this['msg']={}: exports);\n\n\n","module.exports = __webpack_public_path__ + \"static/media/narcos.logo.5d0f7fbb.png\";","import React from 'react'\nimport PropTypes from 'prop-types'\nclass Chathead extends React.Component{\n    propTypes: {\n      text: PropTypes.string.isRequired,\n      userid: PropTypes.string.isRequired\n    }\n   render(): Object {\n    return (\n      <div className={'message'}>\n        {this.props.text}\n        <div className={'arrow'} />\n        <img\n          className={'head'} alt=\"avatar\"\n          src={\"http://graph.facebook.com/\"+this.props.userid+\"/picture?type=square\"}/>\n      </div>\n    );\n  }\n}\n\nexport default Chathead\n","import React from 'react'\nimport {TransitionMotion, spring, presets} from 'react-motion'\n\nclass ChatPane extends React.Component{\n\n   render(): Object {\n    return (\n      <TransitionMotion\n        defaultStyles={this.getDefaultValue()}\n        styles={this.getEndValue()}\n        willLeave={this.willLeave}\n        willEnter={this.willEnter}>\n        {\n          styles => <div className={'chatpane'}>\n          {\n            styles.map(({key, style, data}) =>\n              <div style={style}> {data}  </div>\n          )}\n          </div>\n        }\n      </TransitionMotion>\n    );\n  }\n\n  getEndValue()  {\n    var lastNToKeep = 5;\n    var childrenMap = [];\n    var total = this.props.children.length;\n    var j = Math.max(total - lastNToKeep, 0);\n    for (var i = j; i < total; i++){\n      childrenMap[i-j] = {\n        key: i.toString(),\n        data: this.props.children[i],\n        style: {\n          width: spring(300, presets.gentle),\n          opacity: spring(1, presets.gentle),\n        }\n      };\n    }\n    return childrenMap;\n  }\n     // actual animation-related logic\n  getDefaultValue()  {\n    return [];\n  }\n   willEnter() {\n    return {\n      width: 0,\n      opacity: 1,\n    };\n  }\n   willLeave() {\n    return {\n      width: spring(0),\n      opacity: spring(0),\n    };\n  }\n}\n\nexport default ChatPane\n","import React from 'react'\nimport ReactPlayer from 'react-player'\nimport Chathead from './chatHead.js'\nimport ChatPane from './chatPane.js'\nimport './range.css'\n\nvar PlayerAction = require('./lib/player_action.js');\nvar msg = require('./lib/msg.js');\n\nclass Player extends React.Component {\n\n  state = {\n    url: null,\n    playing: this.props.playing,\n    volume: 0.8,\n    muted: false,\n    played: 0,\n    loaded: 0,\n    duration: 0,\n    playbackRate: 1.0,\n    loop: false,\n    opaque: false,\n    modalIsOpen: false,\n    init: false,\n    initiate: true,\n    text: '',\n    chatheads: [],\n  }\n\n  onstart() {\n    console.log(\"onstart\")\n  }\n\n  onPlay = () => {\n    if (this.state.initiate) {\n      console.log('onPlay')\n      this.setState({ playing: true })\n      var message = this.createMessage(false, this.props.rid, 0, PlayerAction.PLAY);\n      this.props.socket.emit('postData', JSON.stringify(message));\n    } else {\n      this.setState({ initiate: true})\n    }\n  }\n  onPause = () => {\n    if (this.state.initiate) {\n      console.log('onPause')\n      this.setState({ playing: false })\n      var message = this.createMessage(false, this.props.rid, 0, PlayerAction.PAUSE);\n      this.props.socket.emit('postData', JSON.stringify(message));\n    } else {\n      this.setState({ initiate: true})\n    }\n  }\n\n  checkRecieve = (rawdata) => {\n    var data = JSON.parse(rawdata.message);\n    console.log(data);\n    var time = this.player.getCurrentTime()\n    this.props.socket.emit('init', JSON.stringify(this.createMessage(false, this.props.rid, time, PlayerAction.RELOAD, this.state.url)));\n  }\n\n  ref = (player) => {\n    this.player = player\n    console.log(this.player)\n  }\n\n  onSeekMouseDown = e => {\n    this.setState({ seeking: true })\n  }\n  onSeekChange = e => {\n    this.setState({ played: parseFloat(e.target.value) })\n  }\n  onSeekMouseUp = e => {\n    this.setState({ seeking: false })\n    var percentage = parseFloat(e.target.value)\n    // TODO: record total time on server side\n    var message = this.createMessage(false, this.props.rid, percentage * this.state.duration, PlayerAction.SEEK);\n    this.props.socket.emit('postData', JSON.stringify(message));\n    this.player.seekTo(percentage)\n  }\n\n  onProgress = state => {\n    // We only want to update time slider if we are not currently seeking\n    if (!this.state.seeking) {\n      this.setState(state)\n    }\n  }\n\n  onDuration = (duration) => {\n    console.log('onDuration', duration)\n    this.setState({ duration })\n  }\n\n  playPause = () => {\n    this.setState({ playing: !this.state.playing })\n  }\n\n  render() {\n    const { url, playing, volume, muted, loop, played, loaded, duration, playbackRate } = this.state\n    var w = window.innerWidth * this.props.portion\n    var h = window.innerHeight * this.props.portion\n\n    return (\n      <div>\n        <ChatPane>\n          {this.state.chatheads}\n        </ChatPane>\n        <tr>\n          <th>Seek</th>\n          <td>\n            <input\n              type='range' min={0} max={1} style={{'width': w-285}} step='any'\n              value={played}\n              onMouseDown={this.onSeekMouseDown}\n              onChange={this.onSeekChange}\n              onMouseUp={this.onSeekMouseUp}\n            />\n          </td>\n          <th><button onClick={() => {\n            this.sendChat(this.state.text)\n            this._addMessage(this.state.text, this.props.userid)\n            this.setState({text: ''});\n          }}>\n            Chat\n          </button></th>\n          <td><input\n            type=\"text\"\n            style={{'width': 200}}\n            value={this.state.text}\n            onChange={evt => this.setState({\n              text: evt.target.value\n            })}\n            onKeyDown={evt => this._add(evt)}\n            /></td>\n        </tr>\n        <div\n          style={{'width': w, 'height': h, 'display': 'inline-block'}}\n          className={this.state.opaque ? 'opaque' : ''}\n          onMouseOver={this.over}\n          onMouseOut={this.out} >\n          <ReactPlayer\n            ref={this.ref}\n            url={this.state.url}\n            width='100%'\n            height='100%'\n            playing={playing}\n            onPlay={this.onPlay}\n            onPause={this.onPause}\n            onReady={() => console.log('onReady')}\n            config={{\n\n              vimeo: {\n                playerOptions: { byline: false }\n              },\n              dailymotion: {\n                params: { controls: 1 }\n              },\n              facebook: {\n                appId: '106676343020606'\n              }\n            }}\n            onStart={this.onstart}\n            onProgress={this.onProgress}\n            onDuration={this.onDuration}\n          />\n        </div>\n      </div>\n    )\n  }\n\n  out(e) {\n    this.setState({\n      opaque: false\n    })\n  }\n\n  over(e) {\n    this.setState({\n      opaque: true\n    })\n    // this.player.seekTo(10);\n  }\n\n  _add(event) {\n    if(event.keyCode === 13){\n      this.sendChat(this.state.text)\n      this._addMessage(this.state.text, this.props.userid);\n      this.setState({text: ''});\n    }\n  }\n\n  _addMessage(message: string, userid: string) {\n    var chatheads = this.state.chatheads;\n    chatheads.push(\n      <Chathead text={message} userid={userid}/>\n    );\n    this.setState({\n      chatheads: chatheads,\n    });\n  }\n\n  constructor(props) {\n    super(props)\n    this.over = this.over.bind(this)\n    this.out = this.out.bind(this)\n    this.onstart = this.onstart.bind(this)\n    this.messageRecieve = this.messageRecieve.bind(this)\n    this.checkRecieve = this.checkRecieve.bind(this)\n    this.initRecieve = this.initRecieve.bind(this)\n    this.reloadRecieve = this.reloadRecieve.bind(this)\n    this._add = this._add.bind(this);\n    this._addMessage = this._addMessage.bind(this);\n    this.state.init = this.props.init\n    this.state.url = this.props.url\n    console.log(\"constructor\")\n  }\n\n  componentDidMount() {\n    if (!this.props.init) {\n      this.props.socket.emit('create', this.props.room);\n    }\n    this.props.socket.on('notification', this.messageRecieve);\n    this.props.socket.on('check_state', this.checkRecieve);\n    this.props.socket.on('init', this.initRecieve);\n    this.props.socket.on('reload', this.reloadRecieve);\n    console.log(\"componentDidMount\");\n  }\n\n  reload(url) {\n    console.log(url)\n    var message = this.createMessage(false, this.props.rid, 0, PlayerAction.RELOAD, this.props.url);\n    this.props.socket.emit('reload', JSON.stringify(message));\n    this.loadVideo(url);\n  }\n\n  sendChat(text) {\n    var message = this.createMessage(false, this.props.rid, 0, PlayerAction.CHAT, this.props.userid);\n    message.text = text;\n    this.props.socket.emit('postData', JSON.stringify(message));\n  }\n\n  componentDidUpdate(prevProps) {\n\n  }\n\n  createMessage(ack_msg_id, rid, time, action, vid) {\n\n    console.log(\"createMessage\");\n    var message = {\n      clientTime: Date.now() / 1000,\n      clientId: rid,\n      playerTime: time,\n      playerAction: action,\n      videoId: vid,\n      roomId: this.props.room\n    };\n    if (ack_msg_id) {\n      message.ackMsgID = ack_msg_id;\n      message.msgType = msg.MsgType.ACK;\n    } else {\n      message.msgType = msg.MsgType.REQUEST;\n    }\n    console.log(message)\n    return message;\n  }\n\n  messageRecieve(data){\n    data = JSON.parse(data.message);\n    if (parseInt(data.clientId) === this.props.rid) {\n      return;\n    }\n    console.log(data);\n\n    switch(data.msgType) {\n    case msg.MsgType.CHECK_LATENCY:\n      //this.postData(createMessage(true, rid));\n      this.props.socket.emit('postData', JSON.stringify(this.createMessage(true, this.props.rid)));\n      break;\n    case msg.MsgType.ACTION:\n      this.applyActionToPlayer(data);\n      break;\n    }\n\n    return;\n  }\n\n  initRecieve(data){\n    if (this.state.init) {\n      return;\n    }\n    else {\n      data = JSON.parse(data.message);\n      console.log(data);\n      this.applyActionToPlayer(data);\n      this.setState({init: true});\n    }\n  }\n\n  reloadRecieve(data){\n    data = JSON.parse(data.message);\n    console.log(data);\n    if (parseInt(data.clientId) === this.props.rid) {\n      return;\n    }\n    this.loadVideo(data.videoId);\n  }\n\n  loadVideo(url) {\n    this.setState({ url: url})\n    // this.setState({ playing: true})\n  }\n\n  applyActionToPlayer (data) {\n    switch (data.playerAction) {\n    case PlayerAction.PLAY:\n      this.setState({ initiate: false})\n      if (!this.state.playing) {\n        this.setState({ playing: true })\n      }\n      if (data.playerTime !== 0) {\n        this.player.seekTo(data.playerTime);\n      }\n      break;\n    case PlayerAction.PAUSE:\n      this.setState({ initiate: false})\n      if (this.state.playing) {\n        this.setState({ playing: false })\n      }\n      if (data.playerTime !== 0) {\n        this.player.seekTo(data.playerTime);\n      }\n      break;\n    case PlayerAction.SEEK:\n      this.player.seekTo(data.playerTime);\n      break;\n    case PlayerAction.RELOAD:\n      console.log(data.videoId)\n      this.loadVideo(data.videoId);\n      if (data.playerTime !== 0) {\n        this.setState({ playing: true });\n        this.player.seekTo(data.playerTime);\n      }\n      break;\n    case PlayerAction.CHAT:\n      this._addMessage(data.text,data.videoId);\n    }\n  }\n}\n\nexport default Player\n","import React, { Component } from 'react';\nimport './App.css';\nimport './range.css'\nimport Player from './player.js';\nimport Modal from 'react-modal';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Link,\n  Switch,\n  Redirect,\n} from 'react-router-dom'\nimport background from './resources/rainbow.jpg';\nimport logo from './resources/narcos.logo.png';\nimport youtube from './resources/YouTube.jpg';\nimport facebook from './resources/facebook.jpg';\nimport vimeo from './resources/vimeo.jpg';\nimport dailymotion from './resources/dailymotion.jpg';\nimport io from 'socket.io-client'\nimport ReactGA from 'react-ga';\n\nvar UNIVERSE = 100000;\nvar rid = Math.floor(Math.random() * UNIVERSE);\nvar defaultRoomID = 'room' + Math.floor(Math.random() * UNIVERSE);\nvar socket = io.connect();\nvar init = false;\nReactGA.initialize('UA-136827067-1');\nReactGA.pageview('/');\n\nconst customStyles = {\n  content : {\n    top                   : '50%',\n    left                  : '50%',\n    right                 : 'auto',\n    bottom                : 'auto',\n    marginRight           : '-50%',\n    transform             : 'translate(-50%, -50%)'\n  }\n};\n\nModal.setAppElement('#root');\n\nexport class App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      modalIsOpen: false,\n      url: \"https://www.youtube.com/watch?v=oUFJJNQGwhk\",\n      text: '',\n      chatheads: [],\n      roomURL: \"\",\n      player: null,\n      userid: null\n    };\n\n    this.openModal = this.openModal.bind(this);\n    this.afterOpenModal = this.afterOpenModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.setURL = this.setURL.bind(this);\n    this.myRef = React.createRef();\n    this.updateLoggedInState = this.updateLoggedInState.bind(this);\n    this.updateLoggedOutState = this.updateLoggedOutState.bind(this);\n  }\n\n  openModal(u, roomID, player) {\n    this.setState({modalIsOpen: true});\n    this.setState({url: u});\n    this.setState({roomURL: \"/\" + roomID});\n    console.log(\"openModal\")\n    console.log(player)\n    this.setState({player: player});\n  }\n\n  afterOpenModal() {\n    // references are now sync'd and can be accessed.\n    this.subtitle.style.color = '#f00';\n  }\n\n  closeModal() {\n    this.setState({modalIsOpen: false});\n    var dummy = document.createElement('input'),\n        text = window.location.href;\n\n    document.body.appendChild(dummy);\n    dummy.value = text;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n    alert(\"Link \" + text + \" copied to clickboard, now share it with friends!\")\n  }\n\n  setURL(u) {\n    this.setState({url: u});\n  }\n\n  doNothing() {\n\n  }\n\n  updateLoggedInState(response) {\n    this.setState({userid: response.authResponse.userID});\n    console.log(this.state.userid)\n  }\n\n  updateLoggedOutState() {\n    console.log(\"updateLoggedOutState\")\n  }\n\n  componentDidMount() {\n    window.fbAsyncInit = function() {\n      window.FB.init({\n        appId      : '1204292072921486',\n        cookie     : true,  // enable cookies to allow the server to access\n                            // the session\n        xfbml      : true,  // parse social plugins on this page\n        version    : 'v3.2' // use graph api version 3.2\n      });\n\n      window.FB.getLoginStatus(function(response) {\n\n      });\n\n      window.FB.Event.subscribe('auth.statusChange', (response) => {\n        if (response.authResponse) {\n          this.updateLoggedInState(response)\n        } else {\n          this.updateLoggedOutState()\n        }\n      });\n    }.bind(this);\n\n    (function(d, s, id) {\n      var js, fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s); js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    }(document, 'script', 'facebook-jssdk'));\n  }\n\n  render() {\n\n    return (\n      <Router>\n        <div className='App'>\n\n          <div>\n            <Modal\n              isOpen={this.state.modalIsOpen}\n              onAfterOpen={this.afterOpenModal}\n              onRequestClose={this.closeModal}\n              style={customStyles}\n              contentLabel=\"Example Modal\"\n            >\n\n              <h2 ref={subtitle => this.subtitle = subtitle}>Share with others to start watching together!</h2>\n              <button onClick={this.closeModal}>\n\n                  copy url to clipboard\n\n              </button>\n              <div>I am a modal</div>\n\n            </Modal>\n          </div>\n          <div id=\"hero\" className=\"Hero\" style={{backgroundImage: \"url(\"+background+\")\"}}>\n            <div className=\"content\">\n              {/*<img className=\"logo\" src={logo} alt=\"narcos background\" />*/}\n              <div className=\"fb-login-button\" data-max-rows=\"1\" data-size=\"medium\" data-button-type=\"continue_with\" data-show-faces=\"true\" data-auto-logout-link=\"true\" data-use-continue-as=\"true\"></div>\n              <p></p>\n              <h2>lalaWelcome to KeeKon, an experience lets you and your remote friends watch videos together!</h2>\n              <p></p>\n              <h3>Paste below the video link you and your friends would like to watch.</h3>\n              <p></p>\n              <input\n                type=\"text\"\n                style={{'width': 300}}\n                value={this.state.url}\n                onChange={evt => {\n                  this.setState({\n                    url: evt.target.value\n                  })\n                  }\n                }\n                onKeyDown={evt => {\n                  if (evt.keyCode === 13) {\n                    this.myRef.current.reload(evt.target.value)\n                    this.setState({\n                      modalIsOpen:true\n                    })\n                  }\n                  }\n                }\n              />\n              <button className=\"button\" onClick={() => {\n                this.myRef.current.reload(this.state.url)\n                this.setState({\n                  modalIsOpen:true\n                })\n              }}>\n                go\n              </button>\n              <p></p>\n              <div id=\"logos\">\n                <img src={youtube} style={{'width': 60, 'height': 40}} alt=\"youtube logo\" />\n                <img src={facebook} style={{'width': 60, 'height': 40}} alt=\"facebook logo\" />\n                <img src={vimeo} style={{'width': 60, 'height': 40}} alt=\"vimeo logo\" />\n                <img src={dailymotion} style={{'width': 60, 'height': 40}} alt=\"dailymotion logo\" />\n              </div>\n            </div>\n          </div>\n          <Switch>\n            <Route exact path=\"/\" render={({location}) => {\n              init = true;\n              socket.emit('create', defaultRoomID);\n              if (typeof window.ga === 'function') {\n                window.ga('set', 'page', location.pathname + location.search);\n                window.ga('send', 'pageview');\n              }\n              return (\n                <div>\n                <Redirect to={defaultRoomID} />\n                </div>\n               );\n            }}/>\n            <Route path=\"/:roomID\" render={({ match }) => {\n              if (typeof window.ga === 'function') {\n                window.ga('set', 'page', match.pathname + match.search);\n                window.ga('send', 'pageview');\n              }\n              return (\n                <div>\n                <Player ref={this.myRef} url={this.state.url} portion=\"1\" openModal={this.doNothing.bind(this)} playing={false} room={match.params.roomID} socket={socket} rid={rid} init={init} userid={this.state.userid} />\n                </div>\n              );\n            }}/>\n\n          </Switch>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","module.exports = __webpack_public_path__ + \"static/media/rainbow.26ebd1f9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/YouTube.9e04b2f1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/facebook.02e4dc07.jpg\";","module.exports = __webpack_public_path__ + \"static/media/vimeo.ec7e4fdb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/dailymotion.71101c1d.jpg\";"],"sourceRoot":""}